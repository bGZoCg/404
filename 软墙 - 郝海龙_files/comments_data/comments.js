(function(t){function e(e){for(var r,o,i=e[0],u=e[1],c=e[2],m=0,f=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={"embed/comments":0},s=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="https://s.typlog.com/s2/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;s.push([1,"chunk-vendors"]),n()})({"060b":function(t,e,n){"use strict";n("8fde")},1:function(t,e,n){n("8f7e"),t.exports=n("1f76")},"1f76":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("dc21"),s=n("5921"),o=n("e594"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.style,attrs:{id:"app"}},[n("div",{staticClass:"head"},[n("div",{staticClass:"head_tab",class:{_active:"likes"==t.tab},on:{click:function(e){e.preventDefault(),t.tab="likes"}}},[n("svg",{staticClass:"svg-icon",attrs:{"aria-label":"Likes"}},[n("use",{attrs:{"xlink:href":"#heart"}})]),n("span",{domProps:{textContent:t._s(t.likes.length)}})]),n("div",{staticClass:"head_tab",class:{_active:"reposts"==t.tab},on:{click:function(e){e.preventDefault(),t.tab="reposts"}}},[n("svg",{staticClass:"svg-icon",attrs:{"aria-label":"Reposts"}},[n("use",{attrs:{"xlink:href":"#repeat"}})]),n("span",{domProps:{textContent:t._s(t.reposts.length)}})]),n("div",{staticClass:"head_tab",class:{_active:"comments"==t.tab},on:{click:function(e){e.preventDefault(),t.tab="comments"}}},[n("svg",{staticClass:"svg-icon",attrs:{"aria-label":"Comments"}},[n("use",{attrs:{"xlink:href":"#message-square"}})]),n("span",{domProps:{textContent:t._s(t.comments.length)}})])]),n("div",{staticClass:"main"},["likes"==t.tab?n("avatar-list",{attrs:{items:t.likes}}):t._e(),"reposts"==t.tab?n("avatar-list",{attrs:{items:t.reposts}}):t._e(),"comments"==t.tab?n("div",{staticClass:"message-list"},[n("comment-form",{ref:"form",attrs:{item:t.id},on:{submit:t.postItems},model:{value:t.content,callback:function(e){t.content="string"===typeof e?e.trim():e},expression:"content"}}),t._l(t.comments,(function(t){return n("message",{key:t.id,attrs:{item:t}})}))],2):t._e()],1),n("div",{staticClass:"app_svgs",domProps:{innerHTML:t._s(t.svgText)}})])},u=[],c=(n("4de4"),n("4160"),n("ac1f"),n("5319"),n("841c"),n("1276"),n("159b"),n("96cf"),n("1da1")),l=(n("99af"),n("5724")),m=n("8d81"),f=n.n(m);function p(t){var e="/inbox/comments",n={};if(window.atob){var r=parseInt(+new Date/1e3,10),a="Qm84KmEuU29tJmIvIXNeNzZuLnpkYQ",s=window.atob(Math.round(1e4*Math.random())),o=f()(e+s+r,window.atob(a));n["X-Typlog-Signature"]="".concat(r,".").concat(s,".").concat(o)}return l["a"].post(e,{headers:n,data:t})}function d(t){var e=t.before,n=void 0!==e&&e,r=t.item,a=void 0===r?"":r,s="/inbox/comments?item=".concat(a);return n&&(s+="&before="+n),l["a"].get(s)}var h,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar-list"},t._l(t.items,(function(t){return n("author",{key:t.id,attrs:{author:t.author,url:t.meta.url}})})),1)},g=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"author-item",attrs:{href:t.href,target:"_top _blank",title:t.author.name}},[t.author.picture?n("img",{attrs:{src:t.author.picture}}):t._e()])},y=[],_={props:{author:Object,url:String},computed:{href:function(){return this.url||this.author.url}}},w=_,x=(n("060b"),n("2877")),C=Object(x["a"])(w,b,y,!1,null,null,null),k=C.exports,S={components:{Author:k},props:{items:Array}},T=S,E=(n("b655"),Object(x["a"])(T,v,g,!1,null,null,null)),O=E.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message",class:{Pending:"pending"===t.item.status}},[n("div",{staticClass:"message_avatar"},[n("a",{attrs:{href:t.item.author.url||t.item.url,target:"_blank"}},[n("avatar",{attrs:{src:t.item.author.picture,type:"circle",size:"48",name:t.item.author.name}})],1)]),n("div",{staticClass:"message_main"},[n("div",{staticClass:"message_meta"},[n("strong",{domProps:{textContent:t._s(t.item.author.name)}}),t.isTwitter?n("a",{staticClass:"message_via",attrs:{href:t.item.meta.url,target:"_top _blank"}},[n("svg",{staticClass:"svg-icon twitter",attrs:{"aria-label":"Likes"}},[n("use",{attrs:{"xlink:href":"#twitter"}})])]):t._e(),t.item.meta.url?n("a",{attrs:{href:t.item.meta.url,target:"_top _blank"}},[n("time",{attrs:{datetime:t.item.published_at},domProps:{textContent:t._s(t.timeago)}})]):t._e()]),n("div",{ref:"content",staticClass:"message_content",domProps:{innerHTML:t._s(t.content)}})])])},P=[],I=n("b192"),M={components:{Avatar:I["a"]},props:{item:Object},computed:{content:function(){if("html"===this.item.content_type)return this.item.content_text;var t=this.item.meta,e=this.item.content_text;return t.text_overflow&&t.url&&(e=e+"... "+'<a href="'.concat(t.url,'">').concat(t.url,"</a>")),"<p>"+e+"</p>"},timeago:function(){var t=Math.floor((new Date-new Date(this.item.published_at))/1e3),e=Math.floor(t/2592e3);return e>=1?$(e,"month"):(e=Math.floor(t/86400),e>=1?$(e,"day"):(e=Math.floor(t/3600),e>=1?$(e,"hour"):(e=Math.floor(t/60),e>=1?$(e,"minute"):$(t,"second"))))},isTwitter:function(){return!!this.item.meta.url&&/^https:\/\/twitter\.com/.test(this.item.meta.url)}},mounted:function(){for(var t=this.$refs.content.querySelectorAll("a"),e=0;e<t.length;e++)t[e].target="_top _blank"}};function $(t,e){return h?h.format(-t,e):1===t?"".concat(t," ").concat(e," ago"):"".concat(t," ").concat(e,"s ago")}window.Intl&&window.Intl.RelativeTimeFormat&&(h=new Intl.RelativeTimeFormat("en",{numeric:"auto"}));var H=M,D=(n("2cb1"),Object(x["a"])(H,j,P,!1,null,null,null)),R=D.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form"},[n("p",{directives:[{name:"show",rawName:"v-show",value:t.showPlaceHolder,expression:"showPlaceHolder"}],staticClass:"placeholder",attrs:{tabindex:"0"}},[t._v("Share your thoughts...")]),n("div",{ref:"main",staticClass:"form_main",attrs:{"aria-placeholder":"Share your thoughts...",contenteditable:""},on:{input:t.onInput,focus:t.onFocus,focusout:t.onFocusout,paste:function(e){return e.preventDefault(),t.onPaste(e)}}},[t._m(0)]),n("form",{staticClass:"info",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("label",{staticClass:"name"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.author.name,expression:"author.name"}],attrs:{type:"text",placeholder:"Name",maxlength:"20",required:""},domProps:{value:t.author.name},on:{input:function(e){e.target.composing||t.$set(t.author,"name",e.target.value)}}})]),n("label",{staticClass:"email"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.author.email,expression:"author.email"}],attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.author.email},on:{input:function(e){e.target.composing||t.$set(t.author,"email",e.target.value)}}})]),t._m(1)])])},N=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("br")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"button"},[n("span",[t._v("Send")])])}];n("b0c0");function q(){try{return localStorage.setItem("test","a"),localStorage.removeItem("test"),!0}catch(t){return!1}}var z={},F=q(),X="typlog:comment:";function A(t,e){F?localStorage.setItem(X+t,e):z[t]=e}function J(t){return F?localStorage.getItem(X+t):z[t]}var B={get:J,set:A},K={model:{prop:"contentProp",event:"input"},props:{item:{type:String,default:""},contentProp:String},data:function(){var t={name:"",email:""};return{content:"",focused:!1,id:null,type:null,author:t}},computed:{showPlaceHolder:function(){return!this.content.length&&!this.focused}},methods:{onSubmit:function(){var t=B.get("uid");t?this.author.id=t:(this.author.id=f()(this.author.email),B.set("uid",this.author.id)),B.set("name",this.author.name),B.set("email",this.author.email),this.$emit("submit",{author:this.author,item_id:this.id,item_type:this.type})},onInput:function(t){this.content=t.target.innerText,this.$emit("input",this.content)},onFocus:function(){this.focused=!0},onFocusout:function(t){this.focused=!1},onPaste:function(t){var e=(t.originalEvent||t).clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}},created:function(){var t=this.item.split("/");this.type=t[0],this.id=+t[1],this.author.name=B.get("name")||"",this.author.email=B.get("email")||""},mounted:function(){document.execCommand("defaultParagraphSeparator",!1,"p")}},Q=K,U=(n("37ee"),Object(x["a"])(Q,L,N,!1,null,null,null)),V=U.exports,G='<symbol id="heart" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></symbol>\n<symbol id="message-square" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></symbol>\n<symbol id="repeat" viewBox="0 0 24 24"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></symbol>\n<symbol id="twitter" viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></symbol>\n',Y=W(location.search.substring(1)),Z={components:{AvatarList:O,Message:R,CommentForm:V},data:function(){return{id:Y.item,tab:"comments",items:[],content:""}},computed:{likes:function(){return this.items.filter((function(t){return"like"===t.source_type}))},reposts:function(){return this.items.filter((function(t){return"repost"===t.source_type}))},comments:function(){return this.items.filter((function(t){var e=B.get("uid");return"like"!==t.source_type&&"repost"!==t.source_type&&("approved"===t.status||t.author.id===e)}))},style:function(){var t={};return Y.color&&(t["--primary-color"]=Y.color),Y.font&&(t["--custom-font"]=Y.font.replace(/\+/g," ")),t},svgText:function(){return'<svg xmlns="http://www.w3.org/2000/svg"><defs>'+G+"</defs></svg>"}},methods:{fetchItems:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,d({before:t,item:Y.item});case 2:r=n.sent,e.items=r;case 4:case"end":return n.stop()}}),n)})))()},sendHeight:function(){var t=document.body.clientHeight;window.parent.postMessage({height:t},"*")},postItems:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.content_text=e.content,n.next=3,p(t);case 3:r=n.sent,e.$refs.form.$refs.main.innerText="",e.items.unshift(r),e.$refs.form.$refs.main.innerText="",e.$refs.form.content="";case 8:case"end":return n.stop()}}),n)})))()}},updated:function(){var t=this;this.$nextTick((function(){t.sendHeight()}))},created:function(){if(Y.item&&this.fetchItems(),Y.font){var t=document.createElement("link");t.rel="stylesheet",t.href="https://fonts.googleapis.com/css?family=".concat(Y.font,":400,700&display=swap"),document.head.appendChild(t)}}};function W(t){if(!t)return{};var e={};return t.split("&").forEach((function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])})),e}var tt=Z,et=(n("5e9c"),Object(x["a"])(tt,i,u,!1,null,null,null)),nt=et.exports;r["a"].config.productionTip=!1,a["a"]({dsn:"https://fb117b614b564120873e34ce7e751388@sentry.io/1376431",release:"e02a30d21203aee11bfb0400714b870aa8b4328b",environment:void 0,integrations:[new s["a"].GlobalHandlers({onerror:!0,onunhandledrejection:!1}),new o["a"]({Vue:r["a"]})]}),new r["a"]({el:"#app",render:function(t){return t(nt)}})},"2cb1":function(t,e,n){"use strict";n("4998")},"37ee":function(t,e,n){"use strict";n("db54")},4998:function(t,e,n){},5724:function(t,e,n){"use strict";n("99af"),n("4160"),n("a15b"),n("d81d"),n("b64b"),n("d3b7"),n("159b");var r=n("8d81"),a=n.n(r),s=n("82dc"),o={showError:null,handleError:null,site:null};function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=void 0===n?{}:n,a=e.data,i=e.body,u=e.method;a&&(r["Content-Type"]||(r["Content-Type"]="application/json"),i=JSON.stringify(a)),u||(u=i?"POST":"GET"),o.site&&!r["X-Typlog-Site"]&&(r["X-Typlog-Site"]=o.site),r["X-Typlog-Signature"]||c(u,t,r);var l=new XMLHttpRequest;function m(e){e.xhr=l,e.status=l.status,o.handleError&&o.handleError(e),l.status>=500&&!/stats/.test(t)&&Object(s["c"])((function(n){n.setFingerprint(["xhr",u,t,l.status]),n.setExtra("url",t),n.setExtra("method",u),n.setExtra("data",a),n.setExtra("status",l.status),n.setExtra("response",l.responseText),Object(s["a"])(e)}))}return l.open(u,t,!0),l.withCredentials=!0,Object.keys(r).forEach((function(t){l.setRequestHeader(t,r[t])})),new Promise((function(e,n){l.onerror=function(t){n(t)},l.onload=function(){if(l.status){if(l.status>=500){var r=new Error(l.statusText);return m(r),n(r)}var a=l.responseText;if(a&&/json/.test(l.getResponseHeader("Content-Type"))&&(a=JSON.parse(a)),l.status>=200&&l.status<300)e(a);else{var s=new Error(t);s.data=a,m(s),n(s)}}},l.send(i)}))}var u="Qm84KmEuU29tJmIvIXNeNzZuLnpkYQ";function c(t,e,n){var r=parseInt(+new Date/1e3,10),s=r+t+e;n["X-Typlog-Site"]&&(s+=n["X-Typlog-Site"]),n["X-Typlog-Signature"]=r+"."+a()(s,window.atob(u))}function l(t){var e=t.handleError,n=t.site;e&&(o.handleError=e),n&&(o.site=n)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.params,r=e.headers;return n&&(/\?/.test(t)?t+="&":t+="?",t+=Object.keys(n).map((function(t){return"".concat(t,"=").concat(n[t])})).join("&")),i(t,{headers:r})}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.data,r=e.headers;return i(t,{data:n,headers:r,method:"POST"})}function p(t){return i(t,{method:"DELETE"})}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.data,r=e.headers;return i(t,{data:n,headers:r,method:"PATCH"})}e["a"]={config:l,request:i,get:m,post:f,del:p,patch:d}},"5e9c":function(t,e,n){"use strict";n("f6ed")},"690e":function(t,e,n){"use strict";n("ad2e")},"8fde":function(t,e,n){},"98fc":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s}));n("a15b"),n("fb6a"),n("b680"),n("d3b7"),n("ac1f"),n("25f0"),n("5319");function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(t||0===t){if(t>=0&&t<1e4)return t.toString();var n=parseFloat((t/1e3).toFixed(e));return n-Math.floor(n)?n+"K":Math.floor(n)+"K"}return""}function a(t){return"number"===typeof t||/^\d+$/.test(t)?t+"px":t}function s(t){t=t.replace(/^\s+(.*)\s+$/g,"$1");for(var e=[0,0,0],n=0;n<t.length;n++){var r=parseInt(n/e.length),a=parseInt((t[n].charCodeAt()<<5)%242);e[n%3]+=parseInt(a/Math.pow(5,r))}for(var s=0;s<e.length;s++)e[s]>255&&(e[s]=255);return"rgb("+e.join(",")+")"}},ad2e:function(t,e,n){},b192:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar",class:t.modifiers,style:t.style},[t.src?n("img",{attrs:{src:t.src,alt:t.name}}):n("span",[t._v(t._s(t.name[0]))])])},a=[],s=(n("c975"),n("b0c0"),n("a9e3"),n("98fc")),o={name:"avatar",props:{name:{type:String,default:""},size:[String,Number],src:String,type:{type:String,default:"square",validator:function(t){return-1!==["square","circle","round"].indexOf(t)}}},computed:{modifiers:function(){var t=["_"+this.type];return this.src?t.push("_image"):t.push("_text"),t},style:function(){if(!this.size)return{};var t=Object(s["c"])(this.size),e={width:t,height:t,"font-size":"calc(".concat(t," * 0.5)")};return this.src||(e["background-color"]=Object(s["a"])(this.name),e["line-height"]=t),e}}},i=o,u=(n("690e"),n("2877")),c=Object(u["a"])(i,r,a,!1,null,null,null);e["a"]=c.exports},b655:function(t,e,n){"use strict";n("e223")},db54:function(t,e,n){},e223:function(t,e,n){},f6ed:function(t,e,n){}});